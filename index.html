<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Senior Fitness Trainer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root {
      --primary: #1c7c54;     /* matte green vibe */
      --primary-dark: #14563b;
      --bg: #f6f7f9;
      --card: #ffffff;
      --text-main: #222;
      --text-muted: #555;
      --danger: #c0392b;
      --border: #dde1e6;
      --radius-lg: 16px;
    }

    * {
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: var(--bg);
      color: var(--text-main);
    }

    .app {
      max-width: 480px;
      margin: 0 auto;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    header {
      padding: 14px 16px 10px;
      background: var(--primary);
      color: #fff;
      text-align: center;
      position: sticky;
      top: 0;
      z-index: 10;
    }

    header h1 {
      margin: 0;
      font-size: 1.25rem;
      font-weight: 700;
    }

    header p {
      margin: 4px 0 0;
      font-size: 0.75rem;
      opacity: 0.9;
    }

    main {
      padding: 12px;
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .card {
      background: var(--card);
      border-radius: var(--radius-lg);
      padding: 14px 14px 16px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
      border: 1px solid var(--border);
    }

    .card h2 {
      margin: 0 0 8px;
      font-size: 1.05rem;
    }

    .card h3 {
      margin: 10px 0 6px;
      font-size: 0.95rem;
    }

    .card p {
      margin: 4px 0;
      font-size: 0.82rem;
      color: var(--text-muted);
    }

    .tag {
      display: inline-flex;
      align-items: center;
      padding: 3px 8px;
      border-radius: 999px;
      background: rgba(255,255,255,0.2);
      border: 1px solid rgba(255,255,255,0.4);
      font-size: 0.68rem;
      margin-top: 6px;
      gap: 4px;
    }

    .tag-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: #fff;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 8px 12px;
      border-radius: 999px;
      border: none;
      font-size: 0.85rem;
      font-weight: 600;
      cursor: pointer;
      outline: none;
      gap: 6px;
    }

    .btn-primary {
      background: var(--primary);
      color: #fff;
    }

    .btn-primary:active {
      background: var(--primary-dark);
    }

    .btn-ghost {
      background: transparent;
      color: var(--primary);
    }

    .btn-full {
      width: 100%;
    }

    .btn-sm {
      padding: 5px 9px;
      font-size: 0.78rem;
    }

    .btn-icon {
      padding: 6px;
      border-radius: 999px;
      min-width: 32px;
      min-height: 32px;
    }

    .btn-row {
      display: flex;
      gap: 8px;
      margin-top: 8px;
      flex-wrap: wrap;
    }

    .pill-list {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 4px;
    }

    .pill {
      padding: 3px 9px;
      border-radius: 999px;
      border: 1px solid var(--border);
      font-size: 0.7rem;
      background: #f9fafb;
    }

    .input-row {
      display: flex;
      gap: 8px;
      margin-top: 8px;
      flex-wrap: wrap;
    }

    .field {
      flex: 1;
      min-width: 90px;
    }

    .field label {
      display: block;
      font-size: 0.72rem;
      color: var(--text-muted);
      margin-bottom: 2px;
    }

    select {
      width: 100%;
      padding: 6px 8px;
      border-radius: 10px;
      border: 1px solid var(--border);
      font-size: 0.8rem;
      background: #fff;
    }

    .divider {
      height: 1px;
      background: var(--border);
      margin: 10px -14px 8px;
    }

    .chip-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 8px;
    }

    .chip {
      padding: 4px 9px;
      border-radius: 999px;
      border: 1px solid var(--border);
      font-size: 0.72rem;
      background: #f8f9fb;
    }

    .alert {
      border-radius: 12px;
      padding: 8px 10px;
      font-size: 0.75rem;
      margin-top: 8px;
      background: #fff5f4;
      border: 1px solid #f5c3bd;
      color: #7b241c;
    }

    .alert strong {
      display: block;
      margin-bottom: 3px;
    }

    .program-grid {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .program-card {
      border-radius: var(--radius-lg);
      padding: 12px 12px 12px;
      background: var(--card);
      border: 1px solid var(--border);
      box-shadow: 0 2px 4px rgba(0,0,0,0.03);
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .program-header-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 6px;
    }

    .program-title {
      font-size: 0.95rem;
      font-weight: 600;
    }

    .program-subtitle {
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    .badge-soft {
      padding: 3px 8px;
      border-radius: 999px;
      font-size: 0.68rem;
      background: #e9f6f0;
      color: var(--primary-dark);
    }

    .guideline-list {
      margin: 4px 0 0 0;
      padding-left: 18px;
      font-size: 0.78rem;
      color: var(--text-muted);
    }

    .guideline-list li {
      margin-bottom: 2px;
    }

    .exercise-list {
      margin-top: 8px;
    }

    .exercise-item {
      padding: 8px 9px;
      border-radius: 10px;
      border: 1px solid var(--border);
      margin-bottom: 6px;
      background: #fafbfc;
    }

    .exercise-title {
      font-size: 0.85rem;
      font-weight: 600;
    }

    .exercise-meta {
      font-size: 0.75rem;
      color: var(--text-muted);
      margin-top: 2px;
    }

    .footer-note {
      margin-top: 6px;
      font-size: 0.68rem;
      color: var(--text-muted);
      text-align: center;
    }

    .nav-row {
      display: flex;
      gap: 8px;
      justify-content: space-between;
      margin-top: 6px;
      flex-wrap: wrap;
    }

    .nav-row small {
      font-size: 0.7rem;
      color: var(--text-muted);
    }

    .question {
      margin-bottom: 8px;
    }

    .question-label {
      font-size: 0.8rem;
      margin-bottom: 4px;
    }

    .radio-row {
      display: flex;
      gap: 10px;
      font-size: 0.78rem;
      align-items: center;
    }

    .radio-row input {
      margin-right: 3px;
    }

    .parq-scroll {
      max-height: 50vh;
      overflow-y: auto;
      padding-right: 4px;
      margin: 6px 0 2px;
    }

    .parq-note {
      font-size: 0.72rem;
      color: var(--text-muted);
      margin-top: 4px;
    }

    @media (min-width: 540px) {
      header h1 {
        font-size: 1.4rem;
      }
      main {
        padding: 16px;
      }
    }
  </style>
</head>
<body>
<div class="app">
  <header>
    <h1>Senior Fitness Trainer</h1>
    <p>Gentle, safe programs for older adults • Powered by Coach Daniel</p>
  </header>

  <main>
    <!-- Screen: PAR-Q -->
    <section id="screen-parq" class="card">
      <h2>Step 1 · Health Check (PAR-Q)</h2>
      <p>
        Please answer these quick questions. If you answer
        <strong>“Yes” to any</strong>, speak to your doctor before starting or
        changing your exercise program.
      </p>

      <div class="parq-scroll">
        <div class="question">
          <div class="question-label">
            1. Has your doctor ever said that you have a heart condition or that
            you should only do physical activity recommended by a doctor?
          </div>
          <div class="radio-row">
            <label><input type="radio" name="q1" value="no" checked /> No</label>
            <label><input type="radio" name="q1" value="yes" /> Yes</label>
          </div>
        </div>

        <div class="question">
          <div class="question-label">
            2. Do you feel pain in your chest when you do physical activity?
          </div>
          <div class="radio-row">
            <label><input type="radio" name="q2" value="no" checked /> No</label>
            <label><input type="radio" name="q2" value="yes" /> Yes</label>
          </div>
        </div>

        <div class="question">
          <div class="question-label">
            3. In the past month, have you had chest pain when you were not doing physical activity?
          </div>
          <div class="radio-row">
            <label><input type="radio" name="q3" value="no" checked /> No</label>
            <label><input type="radio" name="q3" value="yes" /> Yes</label>
          </div>
        </div>

        <div class="question">
          <div class="question-label">
            4. Do you lose balance because of dizziness or do you ever lose consciousness?
          </div>
          <div class="radio-row">
            <label><input type="radio" name="q4" value="no" checked /> No</label>
            <label><input type="radio" name="q4" value="yes" /> Yes</label>
          </div>
        </div>

        <div class="question">
          <div class="question-label">
            5. Do you have a bone or joint problem that could be made worse by
            a change in your physical activity (e.g. severe arthritis, spine or hip problems)?
          </div>
          <div class="radio-row">
            <label><input type="radio" name="q5" value="no" checked /> No</label>
            <label><input type="radio" name="q5" value="yes" /> Yes</label>
          </div>
        </div>

        <div class="question">
          <div class="question-label">
            6. Is your doctor currently prescribing drugs for your blood pressure or heart condition?
          </div>
          <div class="radio-row">
            <label><input type="radio" name="q6" value="no" checked /> No</label>
            <label><input type="radio" name="q6" value="yes" /> Yes</label>
          </div>
        </div>

        <div class="question">
          <div class="question-label">
            7. Do you know of any other reason why you should not do physical activity?
          </div>
          <div class="radio-row">
            <label><input type="radio" name="q7" value="no" checked /> No</label>
            <label><input type="radio" name="q7" value="yes" /> Yes</label>
          </div>
        </div>
      </div>

      <div id="parq-alert" class="alert" style="display:none;">
        <strong>Important:</strong>
        One or more answers is “Yes”. Please talk to your doctor before starting
        or increasing your exercise. You can still browse the programs, but
        start extra gently and stop if you feel unwell.
      </div>

      <p class="parq-note">
        This PAR-Q is for general guidance only and does not replace advice from
        your doctor or healthcare professional.
      </p>

      <button class="btn btn-primary btn-full" id="btn-continue-programs">
        Continue to Programs
      </button>
    </section>

    <!-- Screen: Program Selection -->
    <section id="screen-programs" class="card" style="display:none;">
      <h2>Step 2 · Choose Your Program</h2>
      <p>Select the program that best matches your current condition.</p>

      <div class="program-grid">
        <div class="program-card">
          <div class="program-header-row">
            <div>
              <div class="program-title">1 · Hypertension-Friendly</div>
              <div class="program-subtitle">
                Gentle, steady movements • Avoid breath holding
              </div>
            </div>
            <div class="badge-soft">Blood Pressure</div>
          </div>
          <ul class="guideline-list">
            <li>Focus on controlled breathing (exhale on effort).</li>
            <li>Avoid long holds or straining; move smoothly.</li>
            <li>Stop if you feel dizzy, chest pain or severe shortness of breath.</li>
          </ul>
          <div class="btn-row">
            <button class="btn btn-primary btn-sm"
              onclick="openProgram('hypertension')">
              View Workout
            </button>
            <button class="btn btn-ghost btn-sm"
              onclick="openGuidelines('hypertension')">
              View Guidelines
            </button>
          </div>
        </div>

        <div class="program-card">
          <div class="program-header-row">
            <div>
              <div class="program-title">2 · Fall-Risk Balance</div>
              <div class="program-subtitle">
                Chair support • Balance & leg strength
              </div>
            </div>
            <div class="badge-soft">Balance & Safety</div>
          </div>
          <ul class="guideline-list">
            <li>Always exercise near a sturdy chair or rail.</li>
            <li>Hold on when needed; work within comfortable range.</li>
            <li>Clear the area of clutter and loose rugs.</li>
          </ul>
          <div class="btn-row">
            <button class="btn btn-primary btn-sm"
              onclick="openProgram('fall')">
              View Workout
            </button>
            <button class="btn btn-ghost btn-sm"
              onclick="openGuidelines('fall')">
              View Guidelines
            </button>
          </div>
        </div>

        <div class="program-card">
          <div class="program-header-row">
            <div>
              <div class="program-title">3 · Osteoporosis Strength</div>
              <div class="program-subtitle">
                Posture, hip strength • No forward spinal bending
              </div>
            </div>
            <div class="badge-soft">Bone Health</div>
          </div>
          <ul class="guideline-list">
            <li>Keep spine tall; avoid deep forward bends & twisting.</li>
            <li>Focus on hips, legs, upper back & posture.</li>
            <li>Slow, controlled movements; no sudden jerks.</li>
          </ul>
          <div class="btn-row">
            <button class="btn btn-primary btn-sm"
              onclick="openProgram('osteo')">
              View Workout
            </button>
            <button class="btn btn-ghost btn-sm"
              onclick="openGuidelines('osteo')">
              View Guidelines
            </button>
          </div>
        </div>
      </div>

      <div class="nav-row">
        <button class="btn btn-ghost btn-sm" onclick="backToParq()">
          ← Back to PAR-Q
        </button>
        <small>Always exercise within your comfort zone.</small>
      </div>
    </section>

    <!-- Screen: Program Detail -->
    <section id="screen-program-detail" class="card" style="display:none;">
      <div class="nav-row" style="margin-bottom:6px;">
        <button class="btn btn-ghost btn-sm" onclick="backToPrograms()">
          ← Back to Programs
        </button>
        <button class="btn btn-ghost btn-sm" onclick="openGuidelinesFromDetail()">
          View Guidelines
        </button>
      </div>

      <h2 id="program-title">Program Title</h2>
      <p id="program-subtitle" style="margin-bottom:6px;"></p>

      <div id="program-pill-tools" class="pill-list"></div>

      <div class="divider"></div>

      <h3>1 · Choose Sets & Reps / Time</h3>
      <p>
        Recommendation:
        <span id="program-reco-text">
          2–3 sets · 8–12 reps or 30–40 seconds per exercise.
        </span>
      </p>

      <div class="input-row">
        <div class="field">
          <label for="sets">Sets</label>
          <select id="sets">
            <option value="2">2 sets (easy)</option>
            <option value="3" selected>3 sets (standard)</option>
            <option value="4">4 sets (advanced)</option>
          </select>
        </div>
        <div class="field">
          <label for="reps">Reps / Time</label>
          <select id="reps">
            <option value="5">5 reps / 20s (very gentle)</option>
            <option value="8">8 reps / 25s</option>
            <option value="10" selected>10 reps / 30s (standard)</option>
            <option value="12">12 reps / 35s</option>
            <option value="15">15 reps / 40s (challenging)</option>
          </select>
        </div>
      </div>

      <div class="alert" id="program-intensity-note">
        <strong>Tip:</strong>
        Start with fewer sets and reps. When it feels “light to moderate”
        and you recover well, you can slowly increase over the weeks.
      </div>

      <div class="divider"></div>

      <h3>2 · Today’s Workout Plan</h3>
      <div id="exercise-list" class="exercise-list"></div>

      <div class="footer-note">
        Stop immediately if you feel chest pain, severe shortness of breath,
        unusual dizziness or joint pain that worsens with movement.
      </div>
    </section>

    <!-- Screen: Guidelines-Only -->
    <section id="screen-guidelines" class="card" style="display:none;">
      <div class="nav-row" style="margin-bottom:6px;">
        <button class="btn btn-ghost btn-sm" onclick="backFromGuidelines()">
          ← Back
        </button>
      </div>
      <h2 id="guide-title">Program Guidelines</h2>
      <p id="guide-subtitle"></p>

      <h3>Key Safety Points</h3>
      <ul id="guide-keypoints" class="guideline-list"></ul>

      <h3>Session Structure (Suggested)</h3>
      <ul id="guide-structure" class="guideline-list"></ul>

      <h3>Weekly Target</h3>
      <ul id="guide-weekly" class="guideline-list"></ul>

      <div class="footer-note">
        These are general guidelines. Individual needs may differ.
        Always follow advice from your doctor or physiotherapist.
      </div>
    </section>

  </main>
</div>

<script>
  // Simple in-page "router"
  const screens = {
    parq: document.getElementById("screen-parq"),
    programs: document.getElementById("screen-programs"),
    programDetail: document.getElementById("screen-program-detail"),
    guidelines: document.getElementById("screen-guidelines")
  };

  let currentProgramKey = null;
  let lastScreenBeforeGuidelines = "programs"; // or "programDetail"

  const programs = {
    hypertension: {
      title: "Hypertension-Friendly Program",
      subtitle:
        "Gentle total-body routine with breathing focus and no heavy straining.",
      tools: [
        "Chair",
        "Resistance band",
        "Standing support",
        "Marching (sit / stand)"
      ],
      recoText: "2–3 sets · 8–12 reps or 20–30 seconds per exercise.",
      exercises: [
        {
          name: "Seated Marching",
          desc: "Sit tall on a chair, lift knees one at a time like slow marching.",
          base: "2–3 sets · 8–12 marches per leg or 20–30 seconds.",
          notes: "Breathe normally, avoid holding your breath."
        },
        {
          name: "Seated Band Row",
          desc: "Wrap band around feet, pull towards your body, squeezing shoulder blades.",
          base: "2–3 sets · 8–12 reps.",
          notes: "Exhale as you pull, inhale as you return."
        },
        {
          name: "Sit-to-Stand (Chair Squat Assisted)",
          desc: "From sitting, stand up using hands on chair/arms if needed, then sit slowly.",
          base: "2–3 sets · 6–10 reps.",
          notes: "Move slowly, avoid sudden movements."
        },
        {
          name: "Standing Side Steps with Support",
          desc: "Hold the back of a chair, step side to side in a gentle rhythm.",
          base: "2–3 sets · 8–12 steps each side or 20–30 seconds.",
          notes: "Keep chest lifted and breathing steady."
        }
      ],
      guidelines: {
        keyPoints: [
          "Avoid breath holding (no straining). Exhale during effort (e.g. standing up).",
          "Move at a comfortable pace; you should be able to talk in short sentences.",
          "Skip exercise if blood pressure is very high or you feel unwell.",
          "Warm up gradually (marching, gentle shoulder rolls) before strengthening."
        ],
        structure: [
          "Warm-up: 5–8 minutes of easy marching, arm swings and shoulder rolls.",
          "Main set: 3–4 exercises, 2–3 sets each, 8–12 reps or 20–30 seconds.",
          "Cool-down: 5 minutes of slow walking/marching and gentle stretches."
        ],
        weekly: [
          "Goal: 2–3 sessions per week on non-consecutive days.",
          "On other days, aim for light walking if tolerated.",
          "Increase only 1 change at a time (either sets, reps, or an extra exercise)."
        ]
      }
    },

    fall: {
      title: "Fall-Risk Balance Program",
      subtitle:
        "Chair-supported strength and balance to help walking confidence and stability.",
      tools: [
        "Chair (back support)",
        "Resistance band (optional)",
        "Ankle weights (optional, later)",
        "Standing space"
      ],
      recoText: "2–3 sets · 8–10 reps or 20–30 seconds per exercise.",
      exercises: [
        {
          name: "Seated Marching",
          desc: "Sit tall and march knees up and down with control.",
          base: "2–3 sets · 10–15 marches per leg or 20–30 seconds.",
          notes: "Great warm-up to wake up the legs."
        },
        {
          name: "Sit-to-Stand (Chair Squat)",
          desc: "Stand up from chair and sit back slowly, using arms as needed.",
          base: "2–3 sets · 6–10 reps.",
          notes: "Feet shoulder-width apart; use chair for safety."
        },
        {
          name: "Standing Heel Raises with Chair",
          desc: "Hold chair, rise up onto toes and slowly lower.",
          base: "2–3 sets · 8–12 reps.",
          notes: "Helps ankle strength and balance for walking."
        },
        {
          name: "Side Leg Raises with Chair",
          desc: "Hold chair, lift one leg out to the side with straight posture.",
          base: "2–3 sets · 8–10 reps per leg.",
          notes: "Keep chest tall, no leaning; tiny range is fine."
        },
        {
          name: "Standing Marching (Chair Support)",
          desc: "Hold chair, march on the spot lifting knees slightly.",
          base: "2–3 sets · 20–30 seconds.",
          notes: "If unsafe, stay seated marching instead."
        }
      ],
      guidelines: {
        keyPoints: [
          "Always stand close to a stable chair or countertop.",
          "Clear the area of clutter, wires, loose mats or wet floors.",
          "Use shoes with good grip; avoid socks on slippery floors.",
          "If you feel unsteady, keep both hands on the chair and reduce range."
        ],
        structure: [
          "Warm-up: 5 minutes of seated marching and ankle circles.",
          "Main set: 4–5 exercises, 2–3 sets, focusing on legs and balance.",
          "Cool-down: 5 minutes of slower marching and gentle standing/seat stretches."
        ],
        weekly: [
          "Goal: 2–3 strength/balance sessions per week.",
          "Practice short bouts of standing balance daily (10–20 seconds) with support.",
          "Progress slowly: first better technique, then more reps/time, then slightly more challenging positions."
        ]
      }
    },

    osteo: {
      title: "Osteoporosis Strength Program",
      subtitle:
        "Focus on posture, hips and legs; avoid deep forward bending and twisting.",
      tools: [
        "Chair",
        "Resistance band",
        "Ankle weights (optional)",
        "Standing space, wall for support"
      ],
      recoText: "2–3 sets · 8–12 reps (no fast jerking).",
      exercises: [
        {
          name: "Seated Posture Reset",
          desc: "Sit tall at edge of chair, gently squeeze shoulder blades together and lengthen spine.",
          base: "2–3 sets · 6–8 slow breaths (hold 2–3 seconds).",
          notes: "No slouching; imagine a string lifting the top of your head."
        },
        {
          name: "Sit-to-Stand (Hip-Focused)",
          desc: "Feet hip-width, lean slightly forward with straight back, stand up and sit down with control.",
          base: "2–3 sets · 6–10 reps.",
          notes: "Avoid rounding the back; use hands on chair if needed."
        },
        {
          name: "Standing Hip Abduction (Side Leg Raise)",
          desc: "Hold chair, lift leg out to the side a small amount, slow up and down.",
          base: "2–3 sets · 8–12 reps per leg.",
          notes: "Keep torso tall; no leaning to the side."
        },
        {
          name: "Standing Hip Extension (Back Leg Kick)",
          desc: "Hold chair, gently extend leg backward without arching the lower back.",
          base: "2–3 sets · 8–10 reps per leg.",
          notes: "Small movement; focus on glute squeeze, not back."
        },
        {
          name: "Band Row (Seated or Standing)",
          desc: "Use band for row, squeezing shoulder blades back and down.",
          base: "2–3 sets · 8–12 reps.",
          notes: "Helps upper back strength and posture."
        }
      ],
      guidelines: {
        keyPoints: [
          "Avoid high-impact jumping and deep forward bending (like touching toes).",
          "Avoid loaded twisting of the spine; keep movements slow and controlled.",
          "Focus on hip, thigh and upper-back strength and upright posture.",
          "If you already have spine fractures, follow your doctor/physio’s specific instructions."
        ],
        structure: [
          "Warm-up: 5–8 minutes of gentle marching, arm swings with straight posture.",
          "Main set: 4–5 strengthening exercises, 2–3 sets of 8–12 reps.",
          "Cool-down: 5 minutes of walking and gentle chest/hip flexor stretches with tall posture."
        ],
        weekly: [
          "Goal: 2–3 strength sessions per week, plus regular walking if tolerated.",
          "Rest at least 48 hours between strength days for the same muscles.",
          "Increase gradually: add reps first, then sets, then resistance (band/ankle weights)."
        ]
      }
    }
  };

  // Helpers to switch screens
  function showScreen(name) {
    Object.entries(screens).forEach(([key, el]) => {
      el.style.display = key === name ? "block" : "none";
    });
  }

  function checkParqAndShowNotice() {
    const yesFound = [1,2,3,4,5,6,7].some((i) => {
      const val = document.querySelector(`input[name="q${i}"]:checked`)?.value;
      return val === "yes";
    });
    const alert = document.getElementById("parq-alert");
    alert.style.display = yesFound ? "block" : "none";
  }

  document.getElementById("btn-continue-programs").addEventListener("click", () => {
    checkParqAndShowNotice();
    showScreen("programs");
  });

  function backToParq() {
    showScreen("parq");
  }

  function backToPrograms() {
    showScreen("programs");
  }

  function openProgram(key) {
    currentProgramKey = key;
    const p = programs[key];
    document.getElementById("program-title").textContent = p.title;
    document.getElementById("program-subtitle").textContent = p.subtitle;
    document.getElementById("program-reco-text").textContent = p.recoText;

    const pillTools = document.getElementById("program-pill-tools");
    pillTools.innerHTML = "";
    p.tools.forEach((tool) => {
      const span = document.createElement("span");
      span.className = "pill";
      span.textContent = tool;
      pillTools.appendChild(span);
    });

    // Reset sets/reps to middle defaults
    document.getElementById("sets").value = "3";
    document.getElementById("reps").value = "10";

    renderExercises();
    showScreen("programDetail");
  }

  function renderExercises() {
    if (!currentProgramKey) return;
    const sets = parseInt(document.getElementById("sets").value, 10);
    const reps = parseInt(document.getElementById("reps").value, 10);
    const p = programs[currentProgramKey];
    const list = document.getElementById("exercise-list");
    list.innerHTML = "";

    p.exercises.forEach((ex, index) => {
      const wrapper = document.createElement("div");
      wrapper.className = "exercise-item";

      const title = document.createElement("div");
      title.className = "exercise-title";
      title.textContent = `${index + 1}. ${ex.name}`;
      wrapper.appendChild(title);

      const meta = document.createElement("div");
      meta.className = "exercise-meta";
      meta.textContent =
        ex.desc;
      wrapper.appendChild(meta);

      const plan = document.createElement("div");
      plan.className = "exercise-meta";
      plan.style.marginTop = "3px";
      plan.innerHTML =
        `<strong>Your plan:</strong> ${sets} sets · ${reps} reps ` +
        `(or about ${Math.round( (reps / 15) * 40 )} seconds)`;
      wrapper.appendChild(plan);

      if (ex.base) {
        const base = document.createElement("div");
        base.className = "exercise-meta";
        base.textContent = `Coach’s baseline suggestion: ${ex.base}`;
        wrapper.appendChild(base);
      }

      if (ex.notes) {
        const notes = document.createElement("div");
        notes.className = "exercise-meta";
        notes.textContent = `Note: ${ex.notes}`;
        wrapper.appendChild(notes);
      }

      list.appendChild(wrapper);
    });
  }

  document.getElementById("sets").addEventListener("change", renderExercises);
  document.getElementById("reps").addEventListener("change", renderExercises);

  function openGuidelines(key) {
    if (!key) key = currentProgramKey;
    if (!key) return;
    currentProgramKey = key;
    const p = programs[key];

    document.getElementById("guide-title").textContent =
      p.title + " · Guidelines";
    document.getElementById("guide-subtitle").textContent = p.subtitle;

    const ulKey = document.getElementById("guide-keypoints");
    const ulStruct = document.getElementById("guide-structure");
    const ulWeek = document.getElementById("guide-weekly");

    ulKey.innerHTML = "";
    ulStruct.innerHTML = "";
    ulWeek.innerHTML = "";

    p.guidelines.keyPoints.forEach((t) => {
      const li = document.createElement("li");
      li.textContent = t;
      ulKey.appendChild(li);
    });

    p.guidelines.structure.forEach((t) => {
      const li = document.createElement("li");
      li.textContent = t;
      ulStruct.appendChild(li);
    });

    p.guidelines.weekly.forEach((t) => {
      const li = document.createElement("li");
      li.textContent = t;
      ulWeek.appendChild(li);
    });

    showScreen("guidelines");
  }

  function openGuidelinesFromDetail() {
    lastScreenBeforeGuidelines = "programDetail";
    openGuidelines(currentProgramKey);
  }

  function backFromGuidelines() {
    if (lastScreenBeforeGuidelines === "programDetail" && currentProgramKey) {
      showScreen("programDetail");
    } else {
      showScreen("programs");
    }
  }

  // Re-check PAR-Q on any change
  [1,2,3,4,5,6,7].forEach((i) => {
    document
      .querySelectorAll(`input[name="q${i}"]`)
      .forEach((radio) =>
        radio.addEventListener("change", checkParqAndShowNotice)
      );
  });
</script>
</body>
</html>
